<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1461px" preserveAspectRatio="none" style="width:1663px;height:1461px;background:#FFFFFF;" version="1.1" viewBox="0 0 1663 1461" width="1663px" zoomAndPan="magnify"><defs/><g><ellipse cx="834.75" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M937.75,40 L937.75,63.6992 L917.75,67.6992 L937.75,71.6992 L937.75,95.3984 A0,0 0 0 0 937.75,95.3984 L1205.75,95.3984 A0,0 0 0 0 1205.75,95.3984 L1205.75,50 L1195.75,40 L937.75,40 A0,0 0 0 0 937.75,40 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1195.75,40 L1195.75,50 L1205.75,50 L1195.75,40 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="943.75" y="57.0669">Reads the configuration entries for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="943.75" y="72.1997">ports and the minimum pollingInterval.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="231" x="943.75" y="87.3325">S7200Resources::readSection()</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="751.75" y="50.7148"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="32" x="761.75" y="71.8535">Read</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="88" x="797.75" y="71.8535">config.s7200</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="18" x="889.75" y="71.8535">file</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="177" x="746.25" y="115.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="153" x="756.25" y="136.5371">S7200HWService::start()</text><path d="M417.25,173.2031 L417.25,213.4688 A0,0 0 0 0 417.25,213.4688 L607.25,213.4688 A0,0 0 0 0 607.25,213.4688 L607.25,197.3359 L627.25,193.3359 L607.25,189.3359 L607.25,183.2031 L597.25,173.2031 L417.25,173.2031 A0,0 0 0 0 417.25,173.2031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M597.25,173.2031 L597.25,183.2031 L607.25,183.2031 L597.25,173.2031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="133" x="428.25" y="190.27">S7200HWService::</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="169" x="423.25" y="205.4028">handleNewIPAddress()</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="415" x="627.25" y="169.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="395" x="637.25" y="190.5059">Launch a thread for each IP Address associated with the driver</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="637.25" y="204.4746">Â </text><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="754" x="457.75" y="237.3047"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="471.75" y="265.8711"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="179" x="481.75" y="287.0098">ThreadPerIP for IP Address 1</text><ellipse cx="571.25" cy="329.8398" fill="#F1F1F1" rx="10" ry="10" style="stroke:#181818;stroke-width:0.5;"/><path d="M568.9219,325.5898 L573.9531,325.5898 L573.9531,326.5898 L570.1094,326.5898 L570.1094,329.168 L573.5781,329.168 L573.5781,330.168 L570.1094,330.168 L570.1094,334.3398 L568.9219,334.3398 L568.9219,325.5898 Z " fill="#000000"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="698.75" y="265.8711"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="179" x="708.75" y="287.0098">ThreadPerIP for IP Address 2</text><ellipse cx="798.25" cy="329.8398" fill="#F1F1F1" rx="10" ry="10" style="stroke:#181818;stroke-width:0.5;"/><path d="M795.9219,325.5898 L800.9531,325.5898 L800.9531,326.5898 L797.1094,326.5898 L797.1094,329.168 L800.5781,329.168 L800.5781,330.168 L797.1094,330.168 L797.1094,334.3398 L795.9219,334.3398 L795.9219,325.5898 Z " fill="#000000"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="200" x="925.75" y="263.3047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="180" x="935.75" y="284.4434">ThreadPerIP for IP Address N</text><path d="M1055.75,317.2734 L1055.75,325.8398 L1035.75,329.8398 L1055.75,333.8398 L1055.75,342.4063 A0,0 0 0 0 1055.75,342.4063 L1197.75,342.4063 A0,0 0 0 0 1197.75,342.4063 L1197.75,327.2734 L1187.75,317.2734 L1055.75,317.2734 A0,0 0 0 0 1055.75,317.2734 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1187.75,317.2734 L1187.75,327.2734 L1197.75,327.2734 L1187.75,317.2734 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="121" x="1061.75" y="334.3403">S7200LibFacade</text><ellipse cx="1025.75" cy="329.8398" fill="#F1F1F1" rx="10" ry="10" style="stroke:#181818;stroke-width:0.5;"/><path d="M1023.4219,325.5898 L1028.4531,325.5898 L1028.4531,326.5898 L1024.6094,326.5898 L1024.6094,329.168 L1028.0781,329.168 L1028.0781,330.168 L1024.6094,330.168 L1024.6094,334.3398 L1023.4219,334.3398 L1023.4219,325.5898 Z " fill="#000000"/><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="754" x="457.75" y="352.4063"/><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="1641.5" x="11" y="378.4063"/><rect fill="none" height="385.3516" style="stroke:#000000;stroke-width:1.5;" width="711" x="23" y="506.5117"/><path d="M236,506.5117 L236,515.8086 L226,525.8086 L23,525.8086 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="26" y="520.5068">S7200HWService::writeData()</text><ellipse cx="378.5" cy="552.8086" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="275.5" y="597.8086"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="186" x="285.5" y="618.9473">Decode HWObject from WinCC</text><polygon fill="#F1F1F1" points="134,676.7773,290,676.7773,302,688.7773,290,700.7773,134,700.7773,122,688.7773,134,676.7773" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="156" x="134" y="692.5854">object is a S7200 HWObject</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="358" x="33" y="720.7773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84" x="43" y="741.916">add object to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="119" x="131" y="741.916">writeQueueForIP</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="127" x="254" y="741.916">for combined writing</text><polygon fill="#F1F1F1" points="484,676.7773,601,676.7773,613,688.7773,601,700.7773,484,700.7773,472,688.7773,484,676.7773" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117" x="484" y="692.5854">object is Config item</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="263" x="411" y="720.7773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="243" x="421" y="741.916">Apply config (Debug Level) immediately</text><ellipse cx="378.5" cy="862.8594" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="378.5" cy="862.8594" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="none" height="364.6128" style="stroke:#000000;stroke-width:1.5;" width="558" x="241" y="925.8594"/><path d="M444,925.8594 L444,935.1563 L434,945.1563 L241,945.1563 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="244" y="939.8545">kafkaHWService::workProc()</text><ellipse cx="378.5" cy="972.1563" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M486,1125.687 L486,1134.2534 L466,1138.2534 L486,1142.2534 L486,1150.8198 A0,0 0 0 0 486,1150.8198 L746,1150.8198 A0,0 0 0 0 746,1150.8198 L746,1135.687 L736,1125.687 L486,1125.687 A0,0 0 0 0 486,1125.687 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M736,1125.687 L736,1135.687 L746,1135.687 L736,1125.687 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="239" x="492" y="1142.7539">DrvManager::getSelfPtr()-&gt;toDp</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="175" x="291" y="1121.269"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="155" x="301" y="1142.4077">push DPE entry to WinCC</text><polygon fill="#F1F1F1" points="294,1072.8667,463,1072.8667,475,1084.8667,463,1096.8667,294,1096.8667,282,1084.8667,294,1072.8667" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="382.5" y="1107.0771">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="169" x="294" y="1088.6748">item addressed in the driver?</text><polygon fill="#F1F1F1" points="287,1017.1563,470,1017.1563,482,1029.1563,470,1041.1563,287,1041.1563,275,1029.1563,287,1017.1563" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="382.5" y="1051.3667">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="287" y="1032.9644">_toDPqueue</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="367" y="1032.9644">items to process?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="261" y="1026.562">no</text><ellipse cx="378.5" cy="1261.6401" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="378.5" cy="1261.6401" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="none" height="559.457" style="stroke:#000000;stroke-width:1.5;" width="609" x="1031.5" y="394.4063"/><path d="M1125.5,394.4063 L1125.5,403.7031 L1115.5,413.7031 L1031.5,413.7031 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1034.5" y="408.4014">ThreadPerIP</text><ellipse cx="1209" cy="440.7031" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M1239,531.5078 L1239,555.207 L1219,559.207 L1239,563.207 L1239,586.9063 A0,0 0 0 0 1239,586.9063 L1501,586.9063 A0,0 0 0 0 1501,586.9063 L1501,541.5078 L1491,531.5078 L1239,531.5078 A0,0 0 0 0 1239,531.5078 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1491,531.5078 L1491,541.5078 L1501,541.5078 L1491,531.5078 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="175" x="1245" y="548.5747">S7200LibFacade.write()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1245" y="563.7075">Pops objects from</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122" x="1364" y="563.7075">writeQueueForIP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1245" y="578.8403">Writes to the device</text><ellipse cx="1209" cy="559.207" fill="#F1F1F1" rx="10" ry="10" style="stroke:#181818;stroke-width:0.5;"/><path d="M1206.6719,554.957 L1211.7031,554.957 L1211.7031,555.957 L1207.8594,555.957 L1207.8594,558.5352 L1211.3281,558.5352 L1211.3281,559.5352 L1207.8594,559.5352 L1207.8594,563.707 L1206.6719,563.707 L1206.6719,554.957 Z " fill="#000000"/><path d="M1239,621.9063 L1239,630.4727 L1219,634.4727 L1239,638.4727 L1239,647.0391 A0,0 0 0 0 1239,647.0391 L1425,647.0391 A0,0 0 0 0 1425,647.0391 L1425,631.9063 L1415,621.9063 L1239,621.9063 A0,0 0 0 0 1239,621.9063 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1415,621.9063 L1415,631.9063 L1425,631.9063 L1415,621.9063 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="165" x="1245" y="638.9731">S7200LibFacade.poll()</text><ellipse cx="1209" cy="634.4727" fill="#F1F1F1" rx="10" ry="10" style="stroke:#181818;stroke-width:0.5;"/><path d="M1206.6719,630.2227 L1211.7031,630.2227 L1211.7031,631.2227 L1207.8594,631.2227 L1207.8594,633.8008 L1211.3281,633.8008 L1211.3281,634.8008 L1207.8594,634.8008 L1207.8594,638.9727 L1206.6719,638.9727 L1206.6719,630.2227 Z " fill="#000000"/><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="1089.5" y="727.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="126" x="1099.5" y="748.9824">S7200HWService::</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="219" x="1099.5" y="762.9512">handleConsumeNewMessage()</text><path d="M1318.5,802.3125 L1318.5,810.8789 L1298.5,814.8789 L1318.5,818.8789 L1318.5,827.4453 A0,0 0 0 0 1318.5,827.4453 L1612.5,827.4453 A0,0 0 0 0 1612.5,827.4453 L1612.5,812.3125 L1602.5,802.3125 L1318.5,802.3125 A0,0 0 0 0 1318.5,802.3125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1602.5,802.3125 L1602.5,812.3125 L1612.5,812.3125 L1602.5,802.3125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="273" x="1324.5" y="819.3794">S7200HWService::insertInDataToDP()</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="1119.5" y="797.8945"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70" x="1129.5" y="819.0332">add DPE to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1203.5" y="819.0332">_toDPqueue</text><polygon fill="#F1F1F1" points="1124.5,667.0391,1293.5,667.0391,1305.5,679.0391,1293.5,691.0391,1124.5,691.0391,1112.5,679.0391,1124.5,667.0391" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1213" y="701.2495">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="169" x="1124.5" y="682.8472">polled messages to process?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1098.5" y="676.4448">no</text><polygon fill="#F1F1F1" points="1160,470.7031,1258,470.7031,1270,482.7031,1258,494.7031,1160,494.7031,1148,482.7031,1160,470.7031" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1213" y="504.9136">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="92" x="1160" y="486.5112">_consumerRun</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="6" x="1252" y="486.5112">?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1134" y="480.1089">no</text><ellipse cx="1209" cy="922.8633" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="1209" cy="922.8633" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="none" height="405.7144" style="stroke:#000000;stroke-width:1.5;" width="742" x="827" y="988.8633"/><path d="M989,988.8633 L989,998.1602 L979,1008.1602 L827,1008.1602 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="830" y="1002.8584">S7200LibFacade.poll()</text><ellipse cx="1209" cy="1035.1602" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><polygon fill="#F1F1F1" points="1060.5,1075.0659,1357.5,1075.0659,1369.5,1087.0659,1357.5,1099.0659,1060.5,1099.0659,1048.5,1087.0659,1060.5,1075.0659" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="1060.5" y="1090.874">Is address present in</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="131" x="1187.5" y="1090.874">lastWritePerAddress</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="1322.5" y="1090.874">map ?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="1027.5" y="1084.4717">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="15" x="1369.5" y="1084.4717">No</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="259" x="896" y="1157.4683"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="239" x="906" y="1178.6069">Update value in map with current time</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="906" y="1192.5757">Add address to Polling List</text><polygon fill="#F1F1F1" points="859,1109.0659,1192,1109.0659,1204,1121.0659,1192,1133.0659,859,1133.0659,847,1121.0659,859,1109.0659" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="1029.5" y="1143.2764">True</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="333" x="859" y="1124.874">Current Time - Last Write time of Address &gt;= Polling Time</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="1299.5" y="1109.0659"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="1309.5" y="1130.2046">Add address to Polling List</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="313" x="1236" y="1178.0347"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="293" x="1246" y="1199.1733">Add address to map with value as current time</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="1100.5" y="1292.6401"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="197" x="1110.5" y="1313.7788">Read address in the Polling List</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="45" x="1110.5" y="1327.7476">update</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1159.5" y="1327.7476">_toDPqueue</text><ellipse cx="1209" cy="1371.5776" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="1209" cy="1371.5776" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="1641.5" x="11" y="1404.5776"/><ellipse cx="834.75" cy="1440.5776" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="828.5628" x2="840.9372" y1="1434.3905" y2="1446.7648"/><line style="stroke:#222222;stroke-width:2.5;" x1="840.9372" x2="828.5628" y1="1434.3905" y2="1446.7648"/><line style="stroke:#181818;stroke-width:1.0;" x1="834.75" x2="834.75" y1="30" y2="50.7148"/><polygon fill="#181818" points="830.75,40.7148,834.75,50.7148,838.75,40.7148,834.75,44.7148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="834.75" x2="834.75" y1="84.6836" y2="115.3984"/><polygon fill="#181818" points="830.75,105.3984,834.75,115.3984,838.75,105.3984,834.75,109.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="834.75" x2="834.75" y1="149.3672" y2="169.3672"/><polygon fill="#181818" points="830.75,159.3672,834.75,169.3672,838.75,159.3672,834.75,163.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="571.25" x2="571.25" y1="299.8398" y2="319.8398"/><polygon fill="#181818" points="567.25,309.8398,571.25,319.8398,575.25,309.8398,571.25,313.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="798.25" x2="798.25" y1="299.8398" y2="319.8398"/><polygon fill="#181818" points="794.25,309.8398,798.25,319.8398,802.25,309.8398,798.25,313.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="1025.75" x2="1025.75" y1="297.2734" y2="319.8398"/><polygon fill="#000000" points="1021.75,309.8398,1025.75,319.8398,1029.75,309.8398,1025.75,313.8398" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="571.25" x2="571.25" y1="243.3047" y2="265.8711"/><polygon fill="#181818" points="567.25,255.8711,571.25,265.8711,575.25,255.8711,571.25,259.8711" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="798.25" x2="798.25" y1="243.3047" y2="265.8711"/><polygon fill="#181818" points="794.25,255.8711,798.25,265.8711,802.25,255.8711,798.25,259.8711" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="1025.75" x2="1025.75" y1="243.3047" y2="263.3047"/><polygon fill="#000000" points="1021.75,253.3047,1025.75,263.3047,1029.75,253.3047,1025.75,257.3047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="834.75" x2="834.75" y1="217.3047" y2="237.3047"/><polygon fill="#181818" points="830.75,227.3047,834.75,237.3047,838.75,227.3047,834.75,231.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="562.8086" y2="597.8086"/><polygon fill="#181818" points="374.5,587.8086,378.5,597.8086,382.5,587.8086,378.5,591.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="212" y1="700.7773" y2="720.7773"/><polygon fill="#181818" points="208,710.7773,212,720.7773,216,710.7773,212,714.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="212" y1="754.7461" y2="816.8594"/><polygon fill="#181818" points="208,806.8594,212,816.8594,216,806.8594,212,810.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="542.5" x2="542.5" y1="700.7773" y2="720.7773"/><polygon fill="#181818" points="538.5,710.7773,542.5,720.7773,546.5,710.7773,542.5,714.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="542.5" x2="542.5" y1="754.7461" y2="816.8594"/><polygon fill="#181818" points="538.5,806.8594,542.5,816.8594,546.5,806.8594,542.5,810.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="472" y1="688.7773" y2="688.7773"/><polygon fill="#181818" points="462,684.7773,472,688.7773,462,692.7773,466,688.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="631.7773" y2="652.0391"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="212" y1="652.0391" y2="652.0391"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="212" y1="652.0391" y2="676.7773"/><polygon fill="#181818" points="208,666.7773,212,676.7773,216,666.7773,212,670.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="709" y1="688.7773" y2="688.7773"/><line style="stroke:#181818;stroke-width:1.0;" x1="709" x2="709" y1="688.7773" y2="816.8594"/><polygon fill="#181818" points="705,806.8594,709,816.8594,713,806.8594,709,810.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="709" y1="816.8594" y2="816.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="816.8594" y2="851.8594"/><polygon fill="#181818" points="374.5,841.8594,378.5,851.8594,382.5,841.8594,378.5,845.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="1096.8667" y2="1121.269"/><polygon fill="#181818" points="374.5,1111.269,378.5,1121.269,382.5,1111.269,378.5,1115.269" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="475" x2="756" y1="1084.8667" y2="1084.8667"/><line style="stroke:#181818;stroke-width:1.0;" x1="756" x2="756" y1="1084.8667" y2="1185.6401"/><polygon fill="#181818" points="752,1175.6401,756,1185.6401,760,1175.6401,756,1179.6401" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="756" x2="378.5" y1="1185.6401" y2="1185.6401"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="1185.6401" y2="1191.6401"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="1155.2378" y2="1185.6401"/><polygon fill="#181818" points="374.5,1175.6401,378.5,1185.6401,382.5,1175.6401,378.5,1179.6401" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="1041.1563" y2="1072.8667"/><polygon fill="#181818" points="374.5,1062.8667,378.5,1072.8667,382.5,1062.8667,378.5,1066.8667" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="1191.6401" y2="1203.6401"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="780" y1="1203.6401" y2="1203.6401"/><polygon fill="#181818" points="776,1123.8511,780,1113.8511,784,1123.8511,780,1119.8511" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="780" x2="780" y1="1029.1563" y2="1203.6401"/><line style="stroke:#181818;stroke-width:1.0;" x1="780" x2="482" y1="1029.1563" y2="1029.1563"/><polygon fill="#181818" points="492,1025.1563,482,1029.1563,492,1033.1563,488,1029.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="275" x2="263" y1="1029.1563" y2="1029.1563"/><polygon fill="#181818" points="259,1109.8511,263,1119.8511,267,1109.8511,263,1113.8511" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="263" x2="263" y1="1029.1563" y2="1215.6401"/><line style="stroke:#181818;stroke-width:1.0;" x1="263" x2="378.5" y1="1215.6401" y2="1215.6401"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="1215.6401" y2="1250.6401"/><polygon fill="#181818" points="374.5,1240.6401,378.5,1250.6401,382.5,1240.6401,378.5,1244.6401" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="982.1563" y2="1017.1563"/><polygon fill="#181818" points="374.5,1007.1563,378.5,1017.1563,382.5,1007.1563,378.5,1011.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="569.207" y2="624.4727"/><polygon fill="#181818" points="1205,614.4727,1209,624.4727,1213,614.4727,1209,618.4727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="775.7813" y2="797.8945"/><polygon fill="#181818" points="1205,787.8945,1209,797.8945,1213,787.8945,1209,791.8945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="691.0391" y2="727.8438"/><polygon fill="#181818" points="1205,717.8438,1209,727.8438,1213,717.8438,1209,721.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="831.8633" y2="843.8633"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1624.5" y1="843.8633" y2="843.8633"/><polygon fill="#181818" points="1620.5,777.8945,1624.5,767.8945,1628.5,777.8945,1624.5,773.8945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1624.5" x2="1624.5" y1="679.0391" y2="843.8633"/><line style="stroke:#181818;stroke-width:1.0;" x1="1624.5" x2="1305.5" y1="679.0391" y2="679.0391"/><polygon fill="#181818" points="1315.5,675.0391,1305.5,679.0391,1315.5,683.0391,1311.5,679.0391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1112.5" x2="1077.5" y1="679.0391" y2="679.0391"/><polygon fill="#181818" points="1073.5,763.8945,1077.5,773.8945,1081.5,763.8945,1077.5,767.8945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1077.5" x2="1077.5" y1="679.0391" y2="855.8633"/><line style="stroke:#181818;stroke-width:1.0;" x1="1077.5" x2="1633.5" y1="855.8633" y2="855.8633"/><line style="stroke:#181818;stroke-width:1.0;" x1="1633.5" x2="1633.5" y1="482.7031" y2="855.8633"/><line style="stroke:#181818;stroke-width:1.0;" x1="1633.5" x2="1270" y1="482.7031" y2="482.7031"/><polygon fill="#181818" points="1280,478.7031,1270,482.7031,1280,486.7031,1276,482.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="644.4727" y2="667.0391"/><polygon fill="#181818" points="1205,657.0391,1209,667.0391,1213,657.0391,1209,661.0391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="494.7031" y2="549.207"/><polygon fill="#181818" points="1205,539.207,1209,549.207,1213,539.207,1209,543.207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1148" x2="1053.5" y1="482.7031" y2="482.7031"/><polygon fill="#181818" points="1049.5,670.2266,1053.5,680.2266,1057.5,670.2266,1053.5,674.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1053.5" x2="1053.5" y1="482.7031" y2="879.8633"/><line style="stroke:#181818;stroke-width:1.0;" x1="1053.5" x2="1209" y1="879.8633" y2="879.8633"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="879.8633" y2="911.8633"/><polygon fill="#181818" points="1205,901.8633,1209,911.8633,1213,901.8633,1209,905.8633" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="450.7031" y2="470.7031"/><polygon fill="#181818" points="1205,460.7031,1209,470.7031,1213,460.7031,1209,464.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025.5" x2="1025.5" y1="1133.0659" y2="1157.4683"/><polygon fill="#181818" points="1021.5,1147.4683,1025.5,1157.4683,1029.5,1147.4683,1025.5,1151.4683" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1204" x2="1216" y1="1121.0659" y2="1121.0659"/><line style="stroke:#181818;stroke-width:1.0;" x1="1216" x2="1216" y1="1121.0659" y2="1235.8081"/><polygon fill="#181818" points="1212,1225.8081,1216,1235.8081,1220,1225.8081,1216,1229.8081" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1216" x2="1025.5" y1="1235.8081" y2="1235.8081"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025.5" x2="1025.5" y1="1235.8081" y2="1241.8081"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025.5" x2="1025.5" y1="1205.4058" y2="1235.8081"/><polygon fill="#181818" points="1021.5,1225.8081,1025.5,1235.8081,1029.5,1225.8081,1025.5,1229.8081" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1392.5" x2="1392.5" y1="1143.0347" y2="1178.0347"/><polygon fill="#181818" points="1388.5,1168.0347,1392.5,1178.0347,1396.5,1168.0347,1392.5,1172.0347" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1048.5" x2="1025.5" y1="1087.0659" y2="1087.0659"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025.5" x2="1025.5" y1="1087.0659" y2="1109.0659"/><polygon fill="#181818" points="1021.5,1099.0659,1025.5,1109.0659,1029.5,1099.0659,1025.5,1103.0659" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1369.5" x2="1392.5" y1="1087.0659" y2="1087.0659"/><line style="stroke:#181818;stroke-width:1.0;" x1="1392.5" x2="1392.5" y1="1087.0659" y2="1109.0659"/><polygon fill="#181818" points="1388.5,1099.0659,1392.5,1109.0659,1396.5,1099.0659,1392.5,1103.0659" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025.5" x2="1025.5" y1="1241.8081" y2="1259.8081"/><polygon fill="#181818" points="1021.5,1249.8081,1025.5,1259.8081,1029.5,1249.8081,1025.5,1253.8081" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1392.5" x2="1392.5" y1="1212.0034" y2="1259.8081"/><polygon fill="#181818" points="1388.5,1249.8081,1392.5,1259.8081,1396.5,1249.8081,1392.5,1253.8081" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025.5" x2="1392.5" y1="1259.8081" y2="1259.8081"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="1045.1602" y2="1075.0659"/><polygon fill="#181818" points="1205,1065.0659,1209,1075.0659,1213,1065.0659,1209,1069.0659" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="1259.8081" y2="1292.6401"/><polygon fill="#181818" points="1205,1282.6401,1209,1292.6401,1213,1282.6401,1209,1286.6401" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="1340.5776" y2="1360.5776"/><polygon fill="#181818" points="1205,1350.5776,1209,1360.5776,1213,1350.5776,1209,1354.5776" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="378.5" y1="384.4063" y2="542.8086"/><polygon fill="#181818" points="374.5,532.8086,378.5,542.8086,382.5,532.8086,378.5,536.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1209" x2="1209" y1="384.4063" y2="430.7031"/><polygon fill="#181818" points="1205,420.7031,1209,430.7031,1213,420.7031,1209,424.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="834.75" x2="834.75" y1="358.4063" y2="378.4063"/><polygon fill="#181818" points="830.75,368.4063,834.75,378.4063,838.75,368.4063,834.75,372.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="834.75" x2="834.75" y1="1410.5776" y2="1430.5776"/><polygon fill="#181818" points="830.75,1420.5776,834.75,1430.5776,838.75,1420.5776,834.75,1424.5776" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[b5ee0565fec97f6ed7146ce553398e29]
@startuml
start

:Read <b>config.s7200</b> file;
note right
    Reads the configuration entries for 
    ports and the minimum pollingInterval.
    <b>S7200Resources::readSection()</b>
end note   
:S7200HWService::start() ;

:Launch a thread for each IP Address associated with the driver
;
note left
    <b> S7200HWService::
    <b>handleNewIPAddress()
end note
fork
    :ThreadPerIP for IP Address 1;
    (F)
    detach
fork again
    :ThreadPerIP for IP Address 2;
    (F)
    detach
fork again 
    -[#black,dotted]->
    :ThreadPerIP for IP Address N;
    -[#black,dotted]->
    (F)
    note right
        <b>S7200LibFacade</b>
    end note    
    detach
end fork


fork
    partition S7200HWService::writeData() {
        start
        :Decode HWObject from WinCC;
        if(object is a S7200 HWObject) then
            :add object to <b>writeQueueForIP</b> for combined writing;
        else if(object is Config item) then
            :Apply config (Debug Level) immediately;
        endif
        stop
    }
    partition kafkaHWService::workProc() {
        start
        while (<b>_toDPqueue</b> items to process?) is (yes)
            if (item addressed in the driver?) then (yes)
                :push DPE entry to WinCC;
                note right
                    <b>DrvManager::getSelfPtr()->toDp</b>
                end note
            endif
        endwhile (no)  
        stop
    }

fork again 
    skinparam ConditionEndStyle hline
    partition ThreadPerIP {
        start
        while(<b>_consumerRun</b>?) is (yes)
            (F)
            note right
                <b>S7200LibFacade.write()</b>
                Pops objects from <b>writeQueueForIP</b>
                Writes to the device
            end note
            (F)
            note right 
                <b>S7200LibFacade.poll()</b>
            end note
            while (polled messages to process?) is (yes)
                :<b>S7200HWService::
                <b>handleConsumeNewMessage()</b>;
                :add DPE to <b>_toDPqueue</b>;
                note right
                    <b>S7200HWService::insertInDataToDP()</b>
                end note
            endwhile (no)   
        endwhile (no)
        stop
    }
partition S7200LibFacade.poll() {
    start
    if (Is address present in <b>lastWritePerAddress</b> map ?) then (Yes)
        if(Current Time - Last Write time of Address >= Polling Time) then (True)
            :Update value in map with current time
            Add address to Polling List;
        endif
    else (No)
        :Add address to Polling List;
        :Add address to map with value as current time; 
    endif
    :Read address in the Polling List
    update <b>_toDPqueue</b>;
    stop
}   

end fork


end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>